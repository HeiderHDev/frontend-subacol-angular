<div class="my-movies">
  <mat-toolbar class="my-movies__toolbar">
    <mat-icon>video_library</mat-icon>
    <span class="my-movies__title">Mis Películas Creadas</span>
    <span class="my-movies__spacer"></span>
    <button mat-raised-button color="primary" (click)="goToCreateMovie()">
      <mat-icon>add</mat-icon>
      Crear Nueva
    </button>
  </mat-toolbar>

  <div class="my-movies__stats">
    <mat-card class="my-movies__stat-card">
      <mat-card-content>
        <div class="my-movies__stat-number">{{ myMovies().length }}</div>
        <div class="my-movies__stat-label">Películas Creadas</div>
      </mat-card-content>
    </mat-card>

    <mat-card class="my-movies__stat-card">
      <mat-card-content>
        <div class="my-movies__stat-number">{{ averageRating() }}</div>
        <div class="my-movies__stat-label">Rating Promedio</div>
      </mat-card-content>
    </mat-card>
  </div>

  @if (myMovies().length > 0) {
  <div class="my-movies__grid">
    @for (movie of myMovies(); track movie.id) {
    <div class="my-movies__card-wrapper">
      <app-movie-card
        [movie]="movie"
        [genres]="[]"
        (cardEvent)="handleMovieCardEvent($event)"
      />

      <div class="my-movies__card-actions">
        <button
          mat-mini-fab
          color="primary"
          (click)="editMovie(movie.id)"
          matTooltip="Editar película"
        >
          <mat-icon>edit</mat-icon>
        </button>

        <button
          mat-mini-fab
          color="warn"
          (click)="deleteMovie(movie.id)"
          matTooltip="Eliminar película"
        >
          <mat-icon>delete</mat-icon>
        </button>
      </div>
    </div>
    }
  </div>
  } @else {
  <div class="my-movies__empty">
    <mat-icon class="my-movies__empty-icon">video_library</mat-icon>
    <h3>No has creado películas aún</h3>
    <p>Crea tu primera película personalizada y aparecerá aquí</p>
    <button mat-raised-button color="primary" (click)="goToCreateMovie()">
      <mat-icon>add</mat-icon>
      Crear Primera Película
    </button>
  </div>
  }
</div>
